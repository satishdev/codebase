<!--<script type="text/javascript" src="<?php //echo base_url();?>js/jquery.nivo.slider.pack.js"></script>

<script type="text/javascript">
	$(function() {
		$('#slider').nivoSlider();
		var d=new Date();
		var ll=d.getFullYear()-100;
		var hh=d.getFullYear();
		$('#dob').datepicker({dateFormat:'yy-mm-dd', changeMonth: true, changeYear: true, maxDate: "+0M",yearRange: ll+':'+hh});
	});
</script>-->


<!--<script type="text/javascript">

	$(function() {

		$('#slider').nivoSlider();

		var d=new Date();

		var ll=d.getFullYear()-100;

		var hh=d.getFullYear();

		$('#dob').datepicker({dateFormat:'yy-mm-dd', changeMonth: true, changeYear: true, maxDate: "+0M",yearRange: ll+':'+hh});

	});

</script>-->

<link rel="stylesheet" href="<?php echo base_url(); ?>css/nivo-slider/themes/default/default.css" type="text/css"
      media="screen"/>

<link rel="stylesheet" href="<?php echo base_url(); ?>css/nivo-slider/themes/pascal/pascal.css" type="text/css"
      media="screen"/>

<link rel="stylesheet" href="<?php echo base_url(); ?>css/nivo-slider/themes/orman/orman.css" type="text/css"
      media="screen"/>

<link rel="stylesheet" href="<?php echo base_url(); ?>css/nivo-slider/nivo-slider.css" type="text/css" media="screen"/>

<link rel="stylesheet" href="<?php echo base_url(); ?>css/nivo-slider/style_slider.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="<?php echo base_url(); ?>js/vmap/jquery-jvectormap-1.2.2.css" type="text/css"/>
<link rel="stylesheet" href="<?php echo base_url(); ?>js/vmap/map.css" type="text/css"/>
<!--for left script start-->


<link rel="stylesheet" href="<?php echo base_url() ?>asserts/css/themes/jquery.ui.all.css">
<script src="<?php echo base_url() ?>asserts/js/jquery-1.8.1.js"></script>

<script src="<?php echo base_url() ?>asserts/js/ui/jquery.ui.core.js"></script>
<script src="<?php echo base_url() ?>asserts/js/ui/jquery.ui.widget.js"></script>
<script src="<?php echo base_url() ?>asserts/js/ui/jquery-ui-1.8.23.custom.js"></script>
<script src="<?php echo base_url() ?>asserts/js/ui/jquery.ui.datepicker.js"></script>
<script type="text/javascript"
        src="<?php echo base_url(); ?>asserts/js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<!--JVector Map-->
<script src="<?php echo base_url() ?>js/vmap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="<?php /*echo base_url() */ ?>js/vmap/jquery-mousewheel.js"></script>

<!--<script src="<?php /*echo base_url() */?>js/vmap/lib/jvectormap.js"></script>

<script src="<?php /*echo base_url() */?>js/vmap/lib/abstract-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/abstract-canvas-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/abstract-shape-element.js"></script>

<script src="<?php /*echo base_url() */?>js/vmap/lib/svg-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/svg-group-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/svg-canvas-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/svg-shape-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/svg-path-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/svg-circle-element.js"></script>

<script src="<?php /*echo base_url() */?>js/vmap/lib/vml-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/vml-group-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/vml-canvas-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/vml-shape-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/vml-path-element.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/vml-circle-element.js"></script>

<script src="<?php /*echo base_url() */?>js/vmap/lib/vector-canvas.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/simple-scale.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/numeric-scale.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/ordinal-scale.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/color-scale.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/data-series.js"></script>
<script src="<?php /*echo base_url() */?>js/vmap/lib/proj.js"></script>
<script src="<?php echo base_url() ?>js/vmap/lib/world-map.js"></script>-->
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-us-aea-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-us-lcc-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-us-merc-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-us-mill-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-ca-lcc-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-world-mill-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-russia-mill-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-mexico-mill-en.js"></script>
<script src="<?php echo base_url() ?>js/vmap/maps/jquery-jvectormap-europe-mill-en.js"></script>
<!--End JVector Map-->

<script src="<?php echo base_url() ?>asserts/js/jquery.session.js"></script>

<link rel="stylesheet" href="<?php echo base_url() ?>asserts/css/demos.css">


<!--<script type="text/javascript" src="<?php echo base_url()?>asserts/js/site_js/easySlider1.7.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){
			$("#slider").easySlider({
				auto: true,
				continuous: true,
				numeric: true
			});
		});
	</script>-->
<script>
    $(function () {
        $("#datepicker").datepicker({ minDate: 0, maxDate: "+1M +10D" });
    });
</script>

<?php
$client = new SoapClient("https://devxml.golfswitch.com/golfservice.asmx?WSDL");

$response = $client->Areas(array("Hdr" => array("ResellerId" => "WPA",
    "PartnerId" => "",
    "SourceCd" => "A",
    "Lang" => "en",
    "UserIp" => "66.147.244.227",
    "UserSessionId" => "",
    "AccessKey" => "",
    "Agent" => "",
    "gsSource" => "",
    "gsDebug" => true),
    "Req" => array("CountryId" => "",
        "RegionId" => "")));


$countryArr = $response->AreasResult->Countries->Country;
//print_r($countryArr);
//exit;
//echo "<pre>";


?>



<script type="text/javascript">
    $(document).ready(function () {
        <?
        $country_id=$this->session->userdata('country_id');
        $state_id=$this->session->userdata('state_id');

        if($country_id=='' || $state_id=='')
        {
            $country_id='USA';
            $state_id='AZ';
            $this->session->set_userdata('country_id',$country_id);
            $this->session->set_userdata('state_id',$state_id);
        }


        ?>
		
		
        country_change('<? echo $country_id;?>', 1);
        state_change('<? echo $state_id;?>');

        <? if($this->session->userdata('area_id')!=''){?>
        area_change('<?=$this->session->userdata('area_id')?>');
        <? }?>
    })


    function country_change(country_id, state_set_unset) {
        $('.state_class').removeClass('region');
        $('#state_div').html('<img src="<?=base_url()?>asserts/images/ajax-loader2.gif">');

        $('#country_id_hid').val(country_id);
        $.ajax({
            type: 'post',
            data: 'country_id=' + country_id + '&state_set_unset=' + state_set_unset,
            async: false,
            url: '<?php echo base_url()?>search_golfcourse/country_change',

            success: function (data) {

                $('#error').html('');
                $('.state_class').addClass('region');
                $('#state_div').html(data);

                $('#area_div').html('<select name="area_id" id="area_id"><option value="">--Any Area--</option></select>');

                $('#course_div').html('<select name="course_id" id="course_id"><option value="">--Any Course--</option></select>');

            }

        });
    }


    function state_change(state_id) {
        $('.area_class').removeClass('region');
        $('#area_div').html('<img src="<?=base_url()?>asserts/images/ajax-loader2.gif">');

        $('#state_id_hid').val(state_id);
        var country_id = $('#country_id_hid').val();

        if (state_id != '') {
            $.ajax({
                type: 'post',
                data: 'state_id=' + state_id + '&country_id=' + country_id,
                //data: "jewellerId=" + filter+ "&locale=" +  locale,
                url: '<?php echo base_url()?>search_golfcourse/state_change',
                success: function (data) {

                    $('#error').html('');
                    $('.area_class').addClass('region');
                    $('#area_div').html(data);
                    $('#course_div').html('<select name="course_id" id="course_id"><option value="">--Any Course--</option></select>');


                }

            });
        }
        else {
            $('.area_class').addClass('region');
            $('#area_div').html('<select name="area_id" id="area_id"><option value="">--Any Area--</option></select>');
        }

    }

    function area_change(area_id) {
        $('.course_class').removeClass('region');
        $('#course_div').html('<img src="<?=base_url()?>asserts/images/ajax-loader2.gif">');

        $('#area_id_hid').val(area_id);
        var country_id = $('#country_id_hid').val();
        var state_id = $('#state_id').val();
        if (area_id != '') {
            $.ajax({
                type: 'post',
                dataType: 'json',
                data: 'state_id=' + state_id + '&country_id=' + country_id + '&area_id=' + area_id,
                url: '<?php echo base_url()?>search_golfcourse/area_change',
                success: function (data) {
                    if (data.RetCd == 0) {//if every data is ok from api
                        $('#error').html('');
                        $('.course_class').addClass('region');
                        $('#course_div').html(data.mydata);
                    }
                    else {//if every data is not ok from api
                        $('#error').html(data.RetMsg);
                        $('.course_class').addClass('region');
                        $('#course_div').html('<select name="course_id" id="course_id"><option value="">--Any Course--</option></select>');
                    }
                }
            });
        }
        else {
            $('.course_class').addClass('region');
            $('#course_div').html('<select name="course_id" id="course_id"><option value="">--Any Course--</option></select>');
            $('#error').html('');
        }
    }

</script>


<!--for left script end-->




<?php /*?><!--<div class="left_column">

<!--kuch b our left new-->


<div id="home_content_left">

<div id="error" style="color:#FF0000;margin-left: 11px;"></div>

<div class="search">
<form method="post" name="" action="<?php echo base_url()?>search_golfcourse/search_teetimes" onsubmit="hide_show()" style="float:none!important;">
  <div class="search_top">
	<h3>Search for a Tee Time</h3>
	<div class="united">

<? $countryArr=$this->common_model->select_all('*','gama_country');
$countryArr=$countryArr->result();
?>
<select name="country_id" id="country_id" onChange="country_change(this.value,2)">
<?
for($i=0;$i<count($countryArr);$i++)
	{
		$select=0;
		$country_id=$this->session->userdata('country_id');
		if($country_id==$countryArr[$i]->id)
		{
		  $select=1;

		}?>
<option <? if($select==1){?> selected="selected" <? }?> value="<?php echo $countryArr[$i]->id?>"><?php echo $countryArr[$i]->nm?></option>
<? }?>
</select>
<input type="hidden" value="" id="country_id_hid">
	</div>
  </div>
  <div class="search_rpt">
	<div class="search_mid">
	  <ul>
		<li>
		  <label>Region:</label>
		  <div class="region state_class">


			<div id="state_div">
			<select name="state_id" id="state_id">
			<option value="">--Any State--</option>
			</select>
			</div>
			<input type="hidden" id="state_id_hid" value="">


		  </div>
		</li>
		<li class="spacr">
		  <label>Area:</label>
		  <div class="region area_class">


		<div id="area_div">
		<select name="area_id" id="area_id">
		<option value="">--Any Area--</option>
		</select>
		</div>
		<input type="hidden" id="area_id_hid" value="">

		  </div>
		</li>
		<li>
		  <label>Course:</label>
		  <div class="region course_class">

		<div id="course_div">
		<select name="course_id" id="course_id">
		<option value="">--Any Course--</option>
		</select>
		</div>

		  </div>
		</li>
		<li class="spacr">
		  <label>Date:</label>
		  <div class="region">

			<input type="text" name="datepicker" id="datepicker">
			<a href="#"><img src="<?=base_url()?>asserts/images/lander.png" alt="#" /></a>

			</div>
		</li>
		<li>
		  <label>Time:</label>
		  <div class="region">


			<select name="times" id="times">
			<option value="500">5AM</option>
			<option value="600">6AM</option>
			<option value="700">7AM</option>
			<option value="800">8AM</option>
			<option value="900">9AM</option>
			<option value="1000">10AM</option>
			<option value="1100">11AM</option>
			<option value="1200">12AM</option>
			<option value="1300">1PM</option>
			<option value="1400">2PM</option>
			<option value="1500">3PM</option>
			<option value="1600">4PM</option>
			<option value="1700">5PM</option>
			</select>



			<!--<a href="#"><img src="<?=base_url()?>images/lander2.png" alt="#" /></a>-->
			</div>
		</li>
		<li class="spacr">
		  <label>Players:</label>
		  <div class="region2">
		  <select name="players" id="players">
		  <option value="1">1</option>
		  <option value="2">2</option>
		  <option value="3">3</option>
		  <option value="4">4</option>
		  </select>
	<!--<input type="radio" id="players" name="players" value="1">1
	<input type="radio" id="players" name="players" value="2">2
	<input type="radio" id="players" name="players" value="3">3
	<input type="radio" id="players" name="players" value="4">4-->
		  </div>
		</li>
		<li>
		  <label>Promo Code:</label>
		  <div class="region3_outer">
			<div class="region3">
			  <input type="text" value="" />
			</div>
			<a href="#"><img src="<?=base_url()?>asserts/images/lander3.png" alt="#" /></a> </div>
		</li>
		<li class="spacr">
		  <div class="region4">
		  <input type="hidden" name="my_submit" value="TRUE">
		  <input type="submit" style="cursor:pointer" name="submit" value="Search Tee Times"> </div>
		</li>
	  </ul>
	  <div class="clr"></div>
	</div>
	<div class="clr"></div>
  </div>

  </form>

  <div class="search_bottom">
	<ul>
	  <li class="first_li"><a href="#">Additional Search Options </a></li>
	  <li>
		<input type="checkbox" />
		<label>Show redemption times only </label>
	  </li>
	  <li>
		<input type="checkbox" />
		<label>Show tee time specials only </label>
	  </li>
	</ul>
	<div class="clr"></div>
  </div>
<div class="clr"></div>
</div>
</div>



</div>-->

<?php /*?><div class="left_column">

    <div class="left_slider_box">

       <!-- <img src="<?php echo base_url(); ?>css/images/sample_slide.png" width="580" height="403" style="float: none;"/>-->

       <div class='slider-wrapper theme-default'>

	   <div id="slider" class="nivoSlider">

            <img src="<?php echo base_url(); ?>css/images/slider-1.png" width="580" height="400" style="float: none;" />

            <img src="<?php echo base_url(); ?>css/images/slider-2.jpg" width="580" height="400" style="float: none;" />

            <img src="<?php echo base_url(); ?>css/images/slider-3.jpg" width="580" height="400" style="float: none;" />

            <img src="<?php echo base_url(); ?>css/images/slider-4.jpg" width="580" height="400" style="float: none;" />

            <img src="<?php echo base_url(); ?>css/images/slider-5.jpg" width="580" height="400" style="float: none;" />

       </div>

       </div>

    </div>

</div><?php */
?>

<!--<div class="right_column">

    <div class="player_registration_form">
<?   //echo validation_errors(); ?>
    <form id="appl_form" name="appl_form" method="post" action="<?php echo site_url('home'); ?>" >

        <ol>
		<input id="" name="rel" class="text" type="hidden" value="player_reg"/>
            <li>
                <h3 class="fl">Sign Up</h3> <span><a  class="fr" style="margin-top:10px;" href="<?php echo site_url('club_register'); ?>">Register as club?</a></span>
                <div class="clear"></div>
            </li>
            <li><hr/></li>
            <li>
			 <div class="msg" id="remote_post"></div>
                <label for="first_name">First Name</label>
                <input id="first_name" name="first_name" class="text" value=""/>
            </li>
            <li>
                <label for="last_name">Last Name</label>
                <input id="last_name" name="last_name" class="text" value=""/>
            </li>
            <li>
                <label for="last_name">Gender</label>
                <select id="gender" name="gender" class="text">
					<option value="">Select</option>
                	<option value="m">Male</option>
                    <option value="f">Female</option>
                </select>
            </li>
            <li>
                <label for="stu_number">Email</label>
                <input id="email" name="email" class="text" value=""/>
            </li>
            <li>
                <label for="password">Password</label>
                <input type="password" id="password" name="password" class="text" value=""/>
            </li>
            <li>
                <label for="cp_password">Confirm</label>
                <input type="password" id="cp_password" name="cp_password" class="text" value=""/>
            </li>
			<?php /*?> <li>
                <label for="city">City</label>
                <input type="text" id="city" name="city" class="text" value=""/>
            </li><?php */?>
            <li>
                <label for="country_id">Country</label>
                <select id="country_id" name="country_id" class="text">
                    <?php //echo selectBox('Select', 'country', 'id,name', 'status="1"', ''); ?>
                </select>
            </li>
            <li>
                <label for="dob">DOB</label>
                <input type="text" id="dob" name="dob" readonly="readonly" class="text apply_datepicker" value=""/>
            </li>

            <!--<li id="uploaded_image"></li>-->
<!-- <li>-->
<!--<input type="button" name="imageField" class="upload button j_gen_form_submit" value="Get the Id Card"/>-->
<?php /*?> <label for="dob">&nbsp;</label>
                <input type="submit" id="_r_lgn_btn" class="button_img" value="Sign Up" name="submit" />
                <!--<input type="button" name="imageField" class="upload button j_gen_form_submit" value="Submit"/>-->
            </li>
            <!--<li><hr/></li>-->
        </ol>
     </form>

    </div>

</div><?php */
?>



<script>
$(document).ready(function () {
    $(".jvectormap-region").live("click", function () {		
       console.log('Country:'+($(this).attr("data-code")).substring((($(this).attr("data-code")).length)-2,($(this).attr("data-code")).length));
	   $('#hid_state_id').val(($(this).attr("data-code")).substring((($(this).attr("data-code")).length)-2,($(this).attr("data-code")).length));
		 $('#my_error').text('');
	}); 
	
	$("#country_map .fl a").live("click", function () {
       console.log('Country:'+$(this).attr("title"));
	   $('#hid_country_id').val($(this).attr("title"));
	   $('#hid_state_id').val('');
    }); 
	
	$('#close_btn').live("click", function () {
		$(this).css('display','none');
	}); 
});
    function auto_complete() {
        var hid_country_id = $('#hid_country_id').val();
        var hid_state_id = $('#hid_state_id').val();
        var hid_area_id = $('#hid_area_id').val();
        if (hid_country_id == '' ) {//|| hid_state_id == '' || hid_area_id == ''
            $('#my_error').text('Please Select First Country.');
            //$('#my_error').text('');
            //return false;
			return true;
        }
		
		if (hid_state_id == '' ) {//|| hid_state_id == '' || hid_area_id == ''
            $('#my_error').text('Please Select First Region.');
            //$('#my_error').text('');
            //return false;
			return true;
        }
        var search_me = $('#serchKey').val();
        $.ajax({
            type: 'post',
            data: 'search_me=' + search_me+'&hid_country_id='+hid_country_id+'&hid_state_id='+hid_state_id,
            url: '<?=base_url()?>home/golfcourses_name_auto_complete',
            success: function (data) {
                $('#results').html(data);
                $('#results').show();
                $('#results').mouseleave(function(){
                    $(this).hide();
                });
            }
        });
    }


    function check_course_id() {
        var my_course_id = $('#my_course_id').val();
        var my_course_input =$('#serchKey').val();
        if (my_course_id == '' && my_course_input == '') {
            $('#my_error').text('Please Select First Course Name.');
            //$('#my_error').text('');
            //return false;
        }
    }


    function go_text(val, course_id, country_id, state_id, area_id, fin_date) {
		$('#serchKey').val(val);
        $('#my_course_id').val(course_id);
		$('#my_country_id').val(country_id);
		$('#my_state_id').val(state_id);
		$('#my_area_id').val(area_id);
		$('#my_fin_date').val(fin_date);
			// $course_id=$this->session->userdata('course_id');-
			// $country_id=$this->session->userdata('country_id');
			// $state_id=$this->session->userdata('state_id');
			// $area_id=$this->session->userdata('area_id');
			// $fin_date=$this->session->userdata('fin_date');        
		
        $('#results').hide();
    }
</script>

<style type="text/css">

    #results {
        border: 1px solid #BFBFBF;
        display: none;
        background-color: #FFFFFF;
        height: auto;
        left: 3px;
        top: 59px;
        min-height: 90px;
        width: 450px;
        padding: 10px;
        z-index: 1000;
        position: absolute;
    }

    .signup-form-form p {
        margin: 0px !important;
        padding: 0px !important;
        color: #FF0000;
    }

    #results li:hover {
        background-color: #999999;
    }

</style>


<div id="my_error" style="color:#FF0000"></div>
<div class="main ca">
<div class="part1 fl">
    <div class="box1">
        <div class="heading">Search for a Tea Time</div>
        <div class="box2"><!--home/searchteetimes-->
            <form method="post" action="<?= base_url() ?>search_golfcourse/search_teetimes" onsubmit="return check_course_id()">
                <input type="hidden" name="hid_country_id" id="hid_country_id" 	value="USA <?php //$this->session->userdata('country_id')?>"/> 
				<input type="hidden" name="hid_state_id" id="hid_state_id" 		value="AZ<?php //$this->session->userdata('state_id')?>"/>
				<input type="hidden" name="hid_area_id" id="hid_area_id"  		value="Phoenix Northeast<?php //$this->session->userdata('area_id')?>"/>
				<div class="pos_rel">
                    <label>
                        <div>Golf Club:</div>
                        <input type="text" onkeyup="auto_complete()" autocomplete="off" id="serchKey" value="<?= @$serchKey ?>"
                               class="input_long"></label>
                    <input type="hidden" name="my_course_id" id="my_course_id" value=""/>
					<input type="hidden" name="my_country_id" id="my_country_id" value=""/>
					<input type="hidden" name="my_state_id" id="my_state_id" value=""/>
					<input type="hidden" name="my_area_id" id="my_area_id" value=""/>
					<input type="hidden" name="my_fin_date" id="my_fin_date" value=""/>
					<input type="hidden" name="my_search" id="my_search" value="TRUE"/>
                    <div id="results"></div>
                    <div class="search_icon pos_abs"></div>
                </div>

                <div class="sel_list">
                    <div class="pos_rel fl">
                        <label>
                            <div>Date:</div>
                            <div class="input_long input_small"><input type="text" id="datepicker" class="input_small"
                                                                       style="background:none; border:0px; position:relative; z-index:1;"
                                                                       name="my_date"></div>
                        </label>

                        <div class="cal_icon pos_abs" style="top:29px;"></div>
                    </div>

                    <div class="players fl">
                        <label>
                            <div>Player :</div>
                            <select name="my_players" class="select_fld" id="Players">
                                <option>Select</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                            </select>
                        </label>
                    </div>
                    <div class="searcher fl"><input type="submit" value="Search"/></div>
                    <div class="cb">&nbsp;</div>
                </div>
                <div class="pos_rel chk_list">
                    <label><input type="checkbox"><span>Show redemption times only</span></label>
                    <label><input type="checkbox"><span>Show tea time specials only</span></label>
                    <a id="advance_slide_link" class="add-btn pos_abs" href="#">Additional Search Options</a>
                </div>
                <script type="text/javascript">
                    $('#advance_slide_link').click(function(e){
                        e.preventDefault();
                        $('#advance_slide_container').slideToggle();
                    });
                </script>
            </form>
        </div>
    </div>
    <div class="box4" style="display: none" id="advance_slide_container">
        <style>
            #home_content_left {
                padding: 0 !important;
            }

            .search_top {
                width: 505px !important;
            }

            .search_top h3 {
                width: 315px !important;
            }

            .search_mid, .search_rpt {
                width: 520px !important;
            }

            .search_bottom {
                width: 507px !important;
            }

            .search_mid ul li {
                width: 245px !important;
            }

            .search_mid ul li label {
                width: 50px !important;
            }

            .search_bottom ul li.first_li {
                width: 195px;
            !important
            }

            .search_bottom ul li.first_li a {
                font-size: 13px;
            !important
            }

            .search_bottom ul li {
                width: 153px;
            !important
            }

            .search_bottom ul li label {
                font-size: 9.2px;
            !important
            }
        </style>
        <?php $this->load->view('players/advteetimes.php'); ?>
    </div>
    <div class="box3">
        <div class="head why">Why wesport.com?</div>
        <ul>
            <li>We offer 3000 golf courses accross globe</li>
            <li>We offer cash back offer,no points,cheap tea times online,direct cash manage your own cancel policy</li>
            <li>Integrate your booking agenda with your personal calendar(iphone,outlook)</li>
            <li>Find sport partner across globe</li>
            <li>Manage your team and organise your own games,games history</li>
            <li>Golf Course directory</li>
        </ul>
    </div>

    <div class="box4">
        <div id="world-map" style="width: 540px; height: 400px"></div>
        <!--Map Container-->
    </div>
    <div id="country_map" class="box5">
        <div class="fl">
            <a title="USA" href="#">
                <img src="<?= base_url() ?>asserts/new_images/us.png" alt="us"/>
            </a>

            <div class="uniteder">United States</div>
        </div>
        <div class="fl">
            <a title="CA">
                <img src="<?= base_url() ?>asserts/new_images/canada.png" alt="canada"/>
            </a>

            <div class="canada1">Canada</div>
        </div>
        <div class="fl">
            <a title="SAF" href="<?= base_url() ?>home/country_select/SAF">
                <img src="<?= base_url() ?>asserts/new_images/belgium.png" alt="Southern Africa"/>
            </a>

            <div class="bermuda2">Southern Africa</div>
        </div>
        <div class="fl">
            <a title="MX" href="<?= base_url() ?>home/country_select/MX">
                <img src="<?= base_url() ?>asserts/new_images/mexico.png" alt="Mexico"/>
            </a>

            <div class="mexico3">Mexico</div>
        </div>
        <div class="fl">
            <a title="EUR" href="<?= base_url() ?>home/country_select/EUR">
                <img src="<?= base_url() ?>asserts/new_images/ireland.png" alt="Europe"/>
            </a>

            <div class="ireland4">Europe</div>
        </div>
        <div class="fl">
            <a title="NAF" href="<?= base_url() ?>home/country_select/NAF">
                <img src="<?= base_url() ?>asserts/new_images/scotland.png" alt="North Africa"/>
            </a>

            <div class="scotland5">North Africa</div>
        </div>
        <div class="cb">&nbsp;</div>
    </div>
</div>
<div class="part2 fl">
    <div class="signup-form">
        <div class="signup-form-heading">Sign Up</div>
        <div class="signup-form-form">
            <?
            echo validation_errors();
            if ($this->session->userdata('msg') != '') {
                echo $this->session->userdata('msg');
                $this->session->unset_userdata('msg');
            }
            ?>
            <form method="post" action="#" id="appl_form" name="appl_form" method="post"
                  action=" <?php echo site_url('home'); ?>">
                <label><input type="text" class="form-box first" id="first_name" name="first_name"
                              placeholder="First Name"/></label>
                <label><input type="text" class="form-box" placeholder="Last Name" id="last_name"
                              name="last_name"/></label>
                <label><input type="text" class="form-box form-box-two" id="email" name="email"
                              placeholder="Your Email ID"/></label>
                <!--<label><input type="text" class="form-box form-box-two" placeholder="Re-enter Email" /></label>-->
                <label><input type="password" id="password" name="password" class="form-box form-box-two"
                              placeholder="Password"/></label>
                <label><input type="Password" id="cp_password" name="cp_password" class="form-box form-box-two"
                              placeholder="Confirm Password"/></label>
                <label><input type="text" id="dob" name="dob" class="form-box form-box-two" placeholder="Date of Birth"></label>
                <label>
                    <select class="select_fld long m0" id="country_id" name="country_id">
                        <?php echo selectBox('Select', 'country', 'id,name', 'status="1"', ''); ?>
                    </select>
                </label>
                <label>
                    <select class="select_fld long" id="gender" name="gender">
                        <option>Gender</option>
                        <option>Male</option>
                        <option>Female</option>
                    </select>
                </label>
                <input type="submit" class="submit_btn" name="imageField"/>
            </form>
        </div>
    </div>
    <img src="<?= base_url() ?>asserts/new_images/image.png" alt="images" class="image"/>

    <div class="box6">
        <div class="tea">TEA TIME DEALS YOU MIGHT LIKE</div>
        <div class="box6_inner">
            <div class="box7">
                <div class="course">Course</div>
                <div class="rating">Rating</div>
                <div class="form">Form</div>
            </div>

            <?
            $my_date = strtotime("+1 day", time());
            $my_date = date('Y-m-d', $my_date);
            $client = new SoapClient("https://devxml.golfswitch.com/golfservice.asmx?WSDL");
            $response = $client->CourseAvailList(array("Hdr" => array("ResellerId" => "WPA",
                "PartnerId" => "",
                "SourceCd" => "A",
                "Lang" => "en",
                "UserIp" => "66.147.244.227",
                "UserSessionId" => "",
                "AccessKey" => "",
                "Agent" => "",
                "gsSource" => "",
                "gsDebug" => true),
                "Req" => array("CountryId" => 'USA',
                    "RegionId" => 'AZ',
                    "Area" => 'Phoenix Northeast',
                    "PlayBegDate" => $my_date . "T00:00:00",
                    "PlayEndDate" => $my_date . "T00:00:00",
                    "Time" => 600,
                    "Players" => 1,
                    "MaxDistance" => "",
                    "FeaturedOnly" => false,
                    "ShowAllTimes" => true,
                    "ShowIfNoTimes" => true,
                    "BarterOnly" => false,
                    "ChargingOnly" => false,
                    "SpecialsOnly" => false,
                    "RegularRateOnly" => false,
                    "ProfileId" => "")));

            $RetCd = $response->CourseAvailResult->RetCd;

            $sql = "select * from CourseAvailList where sAr='Phoenix Northeast'";
            $result = $this->db->query($sql);

            $RetCd = 0;
            if ($RetCd == 0) {
                $course_arr = $response->CourseAvailListResult->Courses->alCourse;
                $str = '';
                $even = '';
                $i = 0;
                //$result->result() as $row
                foreach ($result->result() as $row) //$course_arr
                {
                    $i++;
                    if ($i % 2 == 0)
                        $even = 'class="box8"';
                    else
                        $even = 'class="box9"';

                    $rating = ceil($row->rating);
                    $star = '';
                    for ($j = 1; $j <= $rating; $j++) {
                        $star .= '<div class="star1"></div>';
                    }
                    $remain = 5 - $rating;
                    for ($j = 1; $j <= $remain; $j++) {
                        $star .= '<div class="star2"></div>';
                    }

                    $str .= '<div ' . $even . '>
						<div class="course">' . $row->nm . '</div>
						<div class="rating">' . $star . '</div>
						<div class="form">' . $row->curr . $row->fPrc . '</div>
						<div class="peoria">' . $row->sAr . ',' . $row->sReg . '</div>
						</div>';
                    if ($i == 5) {
                        break;
                    }
                }
            }
            echo $str;?>

        </div>
    </div>
</div>
<div class="cb"></div>
</div>
<script type="text/javascript" language="javascript">
window.onload = function() {
    $.ajax({
		url: 'http://wesport.com/newwesp/update',
		type: 'GET',
		data: 'function=UploadDataBase',
		success: function(data){
			console.log(data);
		}
	});
}

var base_url = "<?=base_url()?>";
$(document).ready(function () {
        $( "#dob" ).datepicker({
            changeMonth: true,
            changeYear: true,
            maxDate: "-18Y"
        });
    //Create vector map
    var map, old_map, state, country, a, cid, region;
    region = 'us_lcc_en';
    map = createMap(map, region);

    get_map_country(map, 'USA', true); //fill map by countries available from database
    //End create vector map

    $("#_r_lgn_btn").live("click", function () {
        var FRM = $("#appl_form");
        $.login_validate(FRM);
        //$(FRM).submit();
    });
    // $("#appl_form").validate();

    $('#country_map').on('click', 'a', function (e) {
        e.preventDefault();
        a = $(this);
        country = a.attr('title');
        old_map = $('#world-map').vectorMap('get', 'mapObject');
        get_map_country(old_map, country, false);
    });
});
/**
 *
 * @param map
 * @param region
 * @returns {jvm.WorldMap}
 */
function createMap(map, region) {
    var markers;
    map = new jvm.WorldMap({
        map: region,
        zoomOnScroll: false,
        container: $('#world-map'),
        onRegionClick: function (event, code) {
            $('#world-map').vectorMap('set', 'focus', code);
            state = code.substring(3);
            country = code.substring(0, 2);
            if (state == '' || country == '') {
                get_state_country(code, state, country);
            } else {
                get_state_country(null, state, country);
            }
        },
        onViewportChange: function () {
            markerText();
        },
        series: {
            regions: [
                {
                    scale: ['#225F9C', '#245D97'],
                    normalizeFunction: 'polynomial'
                }
            ]
        },
        markerStyle: {
            initial: {
                fill: 'transparent',
                stroke: 'transparent',
            },
            hover: {
                "fill-opacity": 0,
                fill: 'transparent',
                stroke: 'transparent'
            },
        }
    });
    insertMarker(map);
    $('.jvectormap-zoomin').remove();
    $('.jvectormap-zoomout').remove();
    return map;
}

function insertMarker(map) {
    var regions;
    var centroid = {};
    var markerIndex = 0;
    regions = map.regions;
    $.each(regions, function (i, val) {
        //var elm = val.element.node;
        var elm;
        var bbox;
        var point;
        var code;
        elm = val.element;
        bbox = elm.node.getBBox();

        //point = [bbox.x + bbox.width/2, bbox.y + bbox.height/2];
        //point = [(bbox.x * map.scale) + (bbox.width * map.scale) / 2 + map.transX,(bbox.y * map.scale) + (bbox.height * map.scale) / 2 + map.transY];
        point = [(bbox.x * map.scale) + (bbox.width * map.scale) / 2 + map.transX, (bbox.y * map.scale) + (bbox.height * map.scale) / 2 + map.transY];
        point = map.pointToLatLng(point[0], point[1]); // convert it to lat lon
        if (i.substring(3) == '') {
            code = i;
        } else {
            code = i.substring(3);
        }
        map.addMarker(
            markerIndex,
            {
                latLng: [point.lat, point.lng],
                name: elm.properties['data-code'].substring(3),
                style: {'text': code}
            }
        );

        markerIndex++;
    });
    markerText();
}
function markerText() {
    //alert($(".jvectormap-marker").length);
    $('text').remove();
    var markers = $(".jvectormap-marker");
    var name;
    markers.each(function (i, val) {
        name = $(val).attr("text"); //alert(name);
        if ($(val).attr("data-index")) {
            var text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            var b = val.getBBox();

            var w = b.x;
            var h = b.y;
            /*text.setAttribute("x", (b.x + b.width / 2));
             text.setAttribute("y", (b.y + b.height / 2));*/
            text.setAttribute("x", w);
            text.setAttribute("y", h);
            text.textContent = name;
            text.setAttribute("font-size", "10");
            //text.addClass('textlabel');

            if (val.parentNode) {
                val.parentNode.appendChild(text);
            }
        }
    });
}
/**
 *
 * @param map
 * @param country
 */
function get_map_country(map, country, init) {
    var new_map;
    if (country != 'USA') {
        if (country == 'CA') {
            map.remove();
            new_map = createMap(new_map, 'ca_lcc_en');
        } else if (country == 'SAF' || country == 'NAF') {
            map.remove();
            new_map = createMap(new_map, 'world_mill_en');
            if (country == 'SAF') $('#world-map').vectorMap('set', 'focus', ['ZM', 'BW']);
            else $('#world-map').vectorMap('set', 'focus', 'DZ');
        } else if (country == 'MX') {
            map.remove();
            new_map = createMap(new_map, 'mexico_mill_en');
        } else if (country == 'EUR') {
            map.remove();
            new_map = createMap(new_map, 'europe_mill_en');
        }
    } else {
        if (init === false) {
            map.remove();
            new_map = createMap(new_map, 'us_lcc_en');
        }
    }
    $.post("<?php echo base_url(); ?>search_golfcourse/country_map_change",
        {countries: country},
        function (data) {
            var code_arr = {};
            $.each(data, function (i, val) {
                var precode = '';
                var postcode = '';
                var code = '';
                if (val.c_id == 'USA') {
                    precode = 'US';
                } else {
                    precode = val.c_id;
                }
                postcode = val.id;
                code = precode + '-' + postcode;
                if (val.c_id == 'SAF' || val.c_id == 'EUR' || val.c_id == 'NAF') {
                    code = postcode;
                }
                code_arr[code] = 100;
            });
            //console.log(data);
            if (init === true) {
                map.series.regions[0].setValues(code_arr);
            } else {
                new_map.series.regions[0].setValues(code_arr);
            }
        }, 'json');
}

/**
 *
 * @param state
 * @param country
 */
function get_state_country(code, state, country) {
    var cid = '';
    if (code === null) {
        if (country == 'US') {
            cid = 'USA';
        } else {
            cid = country;
        }
    } else {
        state = code;
    }
    $.post("<?php echo base_url(); ?>search_golfcourse/state_map_change",
        {states: state, countries: cid },
        function (data) {
            var container;
            var html;
            var map;
            var map_info;
            var new_map;

            container = $('#world-map');
            container.css('position', 'relative');

            container.append('<div id="map-inner"></div>');

            var items = $('<div id="map_item"></div>');
            items.append('<h2>' + data[0].s_nm + '</h2>');
            items.append('<a id="close_btn" href="#"><img src="<?php echo base_url();?>asserts/images/bt_delete.png"></a>');
            items.append('<h4>Where do you want to play?</h4>');
            items.append('<hr>');
            items.append('<br>');
            var ul = $('<ul class="map_area"></ul>');
            $.each(data, function (i, val) {
                ul.append('<li>' +
                    '<a data-id="' + val.id + '" href="#">' +
                    val.id +
                    '</a>' +
                    '</li>');
            });
            items.append(ul);

            container.append(items);

            //handle search event
            ul.on('click', 'a', function (e) {
                e.preventDefault();
                $('#advance_form').remove();

                var currentTime = new Date();
                var month = currentTime.getMonth() + 1;
                var day = currentTime.getDate();
                var year = currentTime.getFullYear();

                var date = month + "/" + day + "/" + year;
                var form = $('<form method="post" action="<?php echo base_url();?>search_golfcourse/search_teetimes"></form>');
                if(cid == ''){
                    form.append('<input type="hidden" name="country_id" value="' + state + '">');
                    form.append('<input type="hidden" name="state_id" value="">');
                } else {
                    form.append('<input type="hidden" name="country_id" value="' + cid + '">');
                    form.append('<input type="hidden" name="state_id" value="' + state + '">');
                }
                form.append('<input type="hidden" name="area_id" value="' + $(this).attr('data-id') + '">');
                form.append('<input type="hidden" name="my_submit" value="TRUE">');
                form.append('<input type="hidden" name="datepicker" value="' + date + '">');
                form.append('<input type="hidden" name="times" value="500">');
                form.append('<input type="hidden" name="players" value="1">');
                form.appendTo('body');
                form.submit();
            });

            //close button event
            $('#close_btn').click(function(e){
                e.preventDefault();
                $('#map-inner').remove();
                $('#map_item').remove();
                map = $('#world-map').vectorMap('get', 'mapObject');
                map_info = map.params['map'];
                if(map_info == 'world_mill_en'){
                    if(code == 'ZA') cid = 'SAF';
                    else cid = 'NAF';
                } else if(map_info == 'europe_mill_en'){
                    cid = 'EUR';
                }
                get_map_country(map, cid, false);
            });
            /*$.fancybox(
             html,
             {
             'scrolling': 'no',
             'title': data[0].s_nm,
             'width': 'auto',
             'height': 'auto',
             onComplete: function () {
             $('.map_area').on('click', 'a', function (e) {
             e.preventDefault();
             $('#advance_form').remove();

             var currentTime = new Date()
             var month = currentTime.getMonth() + 1
             var day = currentTime.getDate()
             var year = currentTime.getFullYear()

             var date = month + "/" + day + "/" + year;
             var form = $('<form method="post" action="
            <?php //echo base_url();?>search_golfcourse/search_teetimes"></form>');
             form.append('<input type="hidden" name="country_id" value="' + cid + '">');
             form.append('<input type="hidden" name="state_id" value="' + state + '">');
             form.append('<input type="hidden" name="area_id" value="' + $(this).attr('data-id') + '">');
             form.append('<input type="hidden" name="my_submit" value="TRUE">');
             form.append('<input type="hidden" name="datepicker" value="' + date + '">');
             form.append('<input type="hidden" name="times" value="500">');
             form.append('<input type="hidden" name="players" value="1">');
             form.appendTo('body');
             form.submit();
             });
             }
             }
             );*/
        },
        'json'
    );
}
$.extend({
    login_validate: function (FRM) {
        $(FRM).validate({
            rules: {
                first_name: {
                    required: true

                },
                last_name: {
                    required: true
                },
                gender: {
                    required: true
                },
                email: {
                    required: true,
                    email: true
                },

                password: {
                    required: true,
                    minlength: 5
                },
                cp_password: {
                    required: true,
                    minlength: 5,
                    equalTo: "#password"
                },
                dob: {
                    required: true
                },
                country_id: {
                    required: true
                }
            },
            errorElement: "div",
            messages: {
                first_name: {
                    required: "Please enter First Name"
                },
                last_name: {
                    required: "Please enter Last Name"
                },
                gender: {
                    required: "Please select gender"
                },
                email: {
                    required: "Please enter a valid email address",
                    email: "Please enter a valid email address"
                },
                dob: {
                    required: "Please enter date of birth"
                },
                country_id: {
                    required: "Please select country"
                },
                password: {
                    required: "Please provide a password",
                    minlength: "Your password must be at least 6 characters long"
                },
                cp_password: {
                    required: "Please provide confirm password",
                    minlength: "Your confirm password must be at least 6 characters long",
                    equalTo: "Please enter the same password as above"
                }

            },
            errorPlacement: function (error, element) {
                $(element).closest('li').append(error);
            },
            submitHandler: function (form) {
                $.login_post(form);
            }
        });
    },
    login_post: function (FRM) {
        var data = $(FRM).serialize();
        $.ajax({
            type: "POST",
            url: base_url + "home",
            data: data,
            dataType: "json",
            beforeSend: function () {
                //console.log(data);
                $("#success_msg").html("");
                $("#error_msg").html("");
            },
            success: function (data) {

                if (data.status) {
                    //window.location.href = base_url+"home";
                    $("#remote_post").addClass('success_msg').html(data.message).show();
                    setTimeout(function () {
                        window.location.href = base_url + "login";
                    }, 3000);
                } else {
                    //$("#error_msg").html(data.message);
                    $("#remote_post").addClass('error_msg').html(data.message).show();
                }

            },
            error: function (e, a) {
                // window.location.href = base_url+"home";
            }
        });
    }
});
</script>
<?php
// echo "<pre>";
// print_r($result);
// echo "</pre>";

// foreach ($result->result() as $row)
// {
// echo $row->id;
// echo '<br>';
// echo $row->xid;
//}
?>
